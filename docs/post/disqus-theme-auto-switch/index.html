<!doctype html><html dir=ltr lang=en data-theme=dark class="html theme--dark"><head><title>Talk Tao|
Partoo</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Partoo"><meta name=description content="Reloading a Disqus thread within an AJAX application"><meta name=keywords content="Partoo,全栈开发,talktao,论道,说道"><link rel=stylesheet href=/scss/main.min.903fef1409c78599fb832ebaecb8363733d3e6c74eda4c3e0f6ca7c2eed6d4c0.css integrity="sha256-kD/vFAnHhZn7gy667Lg2NzPT5sdO2kw+D2ynwu7W1MA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.863aef1cf847aa69aa9964477f7c49ea7399346958e08ec8bb874a3a2894266b.css integrity="sha256-hjrvHPhHqmmqmWRHf3xJ6nOZNGlY4I7Iu4dKOiiUJms=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=canonical href=https://www.talktao.cc/post/disqus-theme-auto-switch/><script type=text/javascript src=/js/header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/theme-switcher.min.d75dfe1e1386c4b1282abef3c7efb5eac612a5fe9dd92aafbcaba74026bb6c14.js integrity="sha256-113+HhOGxLEoKr7zx++16sYSpf6d2SqvvKunQCa7bBQ=" crossorigin=anonymous></script><meta property="og:title" content="Make Disqus Auto-Switch theme"><meta property="og:description" content="Reloading a Disqus thread within an AJAX application"><meta property="og:type" content="article"><meta property="og:url" content="https://www.talktao.cc/post/disqus-theme-auto-switch/"><meta property="og:image" content="https://www.talktao.cc/images/site-feature-image.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-12-01T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-01T00:00:00+00:00"><meta property="og:site_name" content="Talk Tao"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"post","name":"Make Disqus Auto-Switch theme","headline":"Make Disqus Auto-Switch theme","alternativeHeadline":"","description":"
      Reloading a Disqus thread within an AJAX application


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.talktao.cc\/post\/disqus-theme-auto-switch\/"},"author":{"@type":"Person","name":"Partoo"},"creator":{"@type":"Person","name":"Partoo"},"accountablePerson":{"@type":"Person","name":"Partoo"},"copyrightHolder":{"@type":"Person","name":"Partoo"},"copyrightYear":"2022","dateCreated":"2022-12-01T00:00:00.00Z","datePublished":"2022-12-01T00:00:00.00Z","dateModified":"2022-12-01T00:00:00.00Z","publisher":{"@type":"Organization","name":"Partoo","url":"https://www.talktao.cc","logo":{"@type":"ImageObject","url":"https:\/\/www.talktao.cc\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":["https://www.talktao.cc/images/site-feature-image.png"],"url":"https:\/\/www.talktao.cc\/post\/disqus-theme-auto-switch\/","wordCount":"318","genre":["front"],"keywords":["hugo","disqus"]}</script></head><body class=body><div class=wrapper><aside class="wrapper__sidebar wrapper__sidebar--hidden"><div class="sidebar
."><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/avatar.png alt="profile picture"><div class=sidebar__introduction-title><a href=/>Talk Tao</a></div><div class=sidebar__introduction-description><p>I'm a full-stack developer.<br>君子不器 博观约取</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href target=_blank rel="noopener me" aria-label title><i class=fa-2x aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://github.com/Partoo target=_blank rel="noopener me" aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.twitter.com/handanyea target=_blank rel="noopener me" aria-label=twitter title=twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:partoo@live.cn target=_blank rel="noopener me" aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
Partoo
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css integrity=sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js integrity=sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js integrity=sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L57MVQGWSV"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-L57MVQGWSV",{anonymize_ip:!1})}</script></div></aside><main class="wrapper__main wrapper__main--fullscreen"><header class=header><div class=.><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/post/ title>Posts</a></li><li class=nav__list-item><a href=/portfolio/ title>Portfolio</a></li><li class=nav__list-item><a href=/about/ title>About</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
."><div class=post__content><h1>Make Disqus Auto-Switch Theme</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>1/12/2022</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>2-minute read</span></li></ul><div class=post__hr></div><h3 id=background>Background</h3><p>Disqus Management supply &ldquo;Color scheme&rdquo; options to choose, but how to auto switch light/dark mode like this site? It&rsquo;s very easy to implement.</p><h3 id=process>Process</h3><ol><li>Firstly, login disqus dashboard and click &ldquo;Settings&rdquo; - &ldquo;General&rdquo; tab, choose &ldquo;auto&rdquo; in &ldquo;Color Scheme&rdquo; options.</li><li>Locate to your theme-switcher event, add code snippet below:</li></ol><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>typeof</span> DISQUS <span style=color:#ff79c6>!==</span> <span style=color:#f1fa8c>&#39;undefined&#39;</span>) {
</span></span><span style=display:flex><span>    DISQUS.reset({
</span></span><span style=display:flex><span>      reload<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>      config<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>window</span>.disqus_config
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Hugo intergrated Disqus already, so you can invoke &lsquo;window.DISQUS&rsquo; in your javascript.</p><ol start=3><li>Full code:</li></ol><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff79c6>const</span> getStoredThemeStyle <span style=color:#ff79c6>=</span> () =&gt; localStorage.getItem(<span style=color:#f1fa8c>&#39;theme&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>const</span> setThemeClass <span style=color:#ff79c6>=</span> (style) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>const</span> html <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>document</span>.documentElement;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>const</span> prevTheme <span style=color:#ff79c6>=</span> [...html.classList].find((c) =&gt; c.match(<span style=color:#f1fa8c>/theme--(light|dark)/</span>));
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>!</span>prevTheme) <span style=color:#ff79c6>return</span>;
</span></span><span style=display:flex><span>  html.classList.remove(prevTheme);
</span></span><span style=display:flex><span>  html.classList.add(<span style=color:#f1fa8c>`theme--</span><span style=color:#f1fa8c>${</span>style<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>`</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>const</span> setThemeStyle <span style=color:#ff79c6>=</span> (style) =&gt; {
</span></span><span style=display:flex><span>  localStorage.setItem(<span style=color:#f1fa8c>&#39;theme&#39;</span>, style);
</span></span><span style=display:flex><span>  setThemeClass(style);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>const</span> switchTheme <span style=color:#ff79c6>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>const</span> currThemeStyle <span style=color:#ff79c6>=</span> getStoredThemeStyle();
</span></span><span style=display:flex><span>  <span style=color:#6272a4>// const e = new Event(&#39;themeChanged&#39;)
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>  <span style=color:#6272a4>// document.dispatchEvent(e)
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>switch</span> (currThemeStyle) {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>case</span> <span style=color:#f1fa8c>&#39;light&#39;</span><span style=color:#ff79c6>:</span>
</span></span><span style=display:flex><span>      setThemeStyle(<span style=color:#f1fa8c>&#39;dark&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>case</span> <span style=color:#f1fa8c>&#39;dark&#39;</span><span style=color:#ff79c6>:</span>
</span></span><span style=display:flex><span>      setThemeStyle(<span style=color:#f1fa8c>&#39;light&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>default</span><span style=color:#ff79c6>:</span>
</span></span><span style=display:flex><span>      setThemeStyle(<span style=color:#f1fa8c>&#39;dark&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>break</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>typeof</span> DISQUS <span style=color:#ff79c6>!==</span> <span style=color:#f1fa8c>&#39;undefined&#39;</span>) {
</span></span><span style=display:flex><span>    DISQUS.reset({
</span></span><span style=display:flex><span>      reload<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>      config<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>window</span>.disqus_config
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>document</span>.addEventListener(
</span></span><span style=display:flex><span>  <span style=color:#f1fa8c>&#39;DOMContentLoaded&#39;</span>,
</span></span><span style=display:flex><span>  () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>const</span> themeSwitcher <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>document</span>.querySelector(<span style=color:#f1fa8c>&#39;.themeswitch&#39;</span>);
</span></span><span style=display:flex><span>    themeSwitcher.addEventListener(<span style=color:#f1fa8c>&#39;click&#39;</span>, switchTheme, <span style=color:#ff79c6>false</span>);
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>false</span>,
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>window</span>.matchMedia(<span style=color:#f1fa8c>&#39;(prefers-color-scheme: dark)&#39;</span>).addEventListener(<span style=color:#f1fa8c>&#39;change&#39;</span>, switchTheme, <span style=color:#ff79c6>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>const</span> currThemeStyle <span style=color:#ff79c6>=</span> getStoredThemeStyle();
</span></span><span style=display:flex><span><span style=color:#ff79c6>if</span> (currThemeStyle) {
</span></span><span style=display:flex><span>  setThemeStyle(currThemeStyle);
</span></span><span style=display:flex><span>} <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>const</span> userPrefersDark <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>window</span>.matchMedia <span style=color:#ff79c6>&amp;&amp;</span> <span style=color:#8be9fd;font-style:italic>window</span>.matchMedia(<span style=color:#f1fa8c>&#39;(prefers-color-scheme: dark)&#39;</span>).matches;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>if</span> (userPrefersDark) {
</span></span><span style=display:flex><span>    setThemeStyle(<span style=color:#f1fa8c>&#39;dark&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>You can click <a href=https://github.com/Partoo/blog/blob/main/assets/js/theme-switcher.js>Github</a></p><h3 id=summarize>Summarize</h3><p>Hugo intergrated Disqus already. We can create a theme-switch event and reloads the Disqus theme on time. When you trigger theme switching event, Disqus will intelligently provide corresponding color scheme according to the color of your current page text.</p><h3>Related Posts</h3><ul><li><a href=/post/hugo-theme-development/>How to make a skills-bar in your Hugo theme</a></li><li><a href=/about/>About Me</a></li><li><a href=/awards/>Awards</a></li></ul></div><div class=post__footer><span><a class=category href=/categories/front/>front</a></span>
<span><a class=tag href=/tags/hugo/>hugo</a><a class=tag href=/tags/disqus/>disqus</a></span></div><div id=comment><h2>comments</h2><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//talktao.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
Partoo
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css integrity=sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js integrity=sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js integrity=sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L57MVQGWSV"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-L57MVQGWSV",{anonymize_ip:!1})}</script></body></html>